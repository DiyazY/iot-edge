Start testing of control: 0

PLAY [Kubernetes Recovery Testing] *********************************************

TASK [Gathering Facts] *********************************************************
ok: [192.168.1.106]
ok: [192.168.1.101]
ok: [192.168.1.102]
ok: [192.168.1.100]

TASK [Set fact for the hostname at the given index] ****************************
ok: [192.168.1.106]

TASK [Get list of all nodes] ***************************************************
changed: [192.168.1.100 -> localhost]
changed: [192.168.1.106 -> localhost]
changed: [192.168.1.102 -> localhost]
changed: [192.168.1.101 -> localhost]

TASK [Split node names into a list] ********************************************
ok: [192.168.1.106 -> localhost]
ok: [192.168.1.100 -> localhost]
ok: [192.168.1.102 -> localhost]
ok: [192.168.1.101 -> localhost]

TASK [Backup current cluster state] ********************************************
changed: [192.168.1.102 -> localhost]
changed: [192.168.1.106 -> localhost]
changed: [192.168.1.101 -> localhost]
changed: [192.168.1.100 -> localhost]

TASK [Get before Date and Time] ************************************************
skipping: [192.168.1.100]
skipping: [192.168.1.102]
skipping: [192.168.1.101]
changed: [192.168.1.106]

TASK [Display the time before test] ********************************************
ok: [192.168.1.106] => {
    "before_datetime.stdout": "1710026162"
}
skipping: [192.168.1.100]
skipping: [192.168.1.102]
skipping: [192.168.1.101]

TASK [Write variable to file] **************************************************
skipping: [192.168.1.102]
skipping: [192.168.1.100]
skipping: [192.168.1.101]
changed: [192.168.1.106]

TASK [Copy before time] ********************************************************
skipping: [192.168.1.102]
skipping: [192.168.1.100]
skipping: [192.168.1.101]
changed: [192.168.1.106]

TASK [Wait for a specified time (e.g., 250 seconds)] ***************************
Pausing for 250 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [192.168.1.106]

TASK [Simulate master failure (Stopping network interface)] ********************
skipping: [192.168.1.100]
skipping: [192.168.1.102]
skipping: [192.168.1.101]
changed: [192.168.1.106]

TASK [Wait until all nodes are Ready] ******************************************
failed: [192.168.1.100 -> localhost] (item=ubuntu-host-75e4c5) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-75e4c5", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.135928", "end": "2024-03-10 01:21:58.073579", "item": "ubuntu-host-75e4c5", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:57.937651", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.106 -> localhost] (item=ubuntu-host-75e4c5) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-75e4c5", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.140645", "end": "2024-03-10 01:21:58.074171", "item": "ubuntu-host-75e4c5", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:57.933526", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.102 -> localhost] (item=ubuntu-host-75e4c5) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-75e4c5", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.111145", "end": "2024-03-10 01:21:58.107023", "item": "ubuntu-host-75e4c5", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:57.995878", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.101 -> localhost] (item=ubuntu-host-75e4c5) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-75e4c5", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.134167", "end": "2024-03-10 01:21:58.154217", "item": "ubuntu-host-75e4c5", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:58.020050", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.100 -> localhost] (item=ubuntu-host-76d48b) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-76d48b", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.065694", "end": "2024-03-10 01:21:58.281629", "item": "ubuntu-host-76d48b", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:58.215935", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.106 -> localhost] (item=ubuntu-host-76d48b) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-76d48b", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.088831", "end": "2024-03-10 01:21:58.367177", "item": "ubuntu-host-76d48b", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:58.278346", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.102 -> localhost] (item=ubuntu-host-76d48b) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-76d48b", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.101908", "end": "2024-03-10 01:21:58.412823", "item": "ubuntu-host-76d48b", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:58.310915", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.101 -> localhost] (item=ubuntu-host-76d48b) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-76d48b", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.114742", "end": "2024-03-10 01:21:58.470609", "item": "ubuntu-host-76d48b", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:58.355867", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.100 -> localhost] (item=ubuntu-host-a6773f) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-a6773f", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.094336", "end": "2024-03-10 01:21:58.552777", "item": "ubuntu-host-a6773f", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:58.458441", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.101 -> localhost] (item=ubuntu-host-a6773f) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-a6773f", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.067848", "end": "2024-03-10 01:21:58.656320", "item": "ubuntu-host-a6773f", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:58.588472", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.106 -> localhost] (item=ubuntu-host-a6773f) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-a6773f", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.080169", "end": "2024-03-10 01:21:58.683634", "item": "ubuntu-host-a6773f", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:58.603465", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.102 -> localhost] (item=ubuntu-host-a6773f) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-a6773f", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.076438", "end": "2024-03-10 01:21:58.722074", "item": "ubuntu-host-a6773f", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:58.645636", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
failed: [192.168.1.100 -> localhost] (item=ubuntu-host-ddde9b) => {"ansible_loop_var": "item", "changed": true, "cmd": ["kubectl", "wait", "--for=condition=Ready", "node/ubuntu-host-ddde9b", "--timeout=10m", "--kubeconfig", "../../.kube/k8s-config"], "delta": "0:00:00.106310", "end": "2024-03-10 01:21:58.856998", "item": "ubuntu-host-ddde9b", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:21:58.750688", "stderr": "The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?", "stderr_lines": ["The connection to the server 192.168.1.106:6443 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
changed: [192.168.1.106 -> localhost] => (item=ubuntu-host-ddde9b)
changed: [192.168.1.102 -> localhost] => (item=ubuntu-host-ddde9b)
changed: [192.168.1.101 -> localhost] => (item=ubuntu-host-ddde9b)

PLAY RECAP *********************************************************************
192.168.1.100              : ok=4    changed=2    unreachable=0    failed=1    skipped=5    rescued=0    ignored=0   
192.168.1.101              : ok=4    changed=2    unreachable=0    failed=1    skipped=5    rescued=0    ignored=0   
192.168.1.102              : ok=4    changed=2    unreachable=0    failed=1    skipped=5    rescued=0    ignored=0   
192.168.1.106              : ok=11   changed=6    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   


PLAY [k-bench derive data from results] ****************************************

TASK [List of test names] ******************************************************
ok: [192.168.1.113]

TASK [Display start and end time] **********************************************
ok: [192.168.1.113] => {
    "msg": "1710026162 - "
}

TASK [Generating CSV file CPU] *************************************************
fatal: [192.168.1.113]: FAILED! => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3"}, "changed": true, "cmd": ["mongoexport", "--db=netdata", "--collection=metrics", "--type=csv", "--fields=hostname,value,timestamp", "--query={\"chart_type\": \"system\", \"chart_family\": \"cpu\", \"chart_context\": \"system.cpu\", \"id\": \"idle\", \"timestamp\": {\"$gt\": 1710026162, \"$lt\":  }}", "--out=./test-results/reliability-control-5-cpu.csv"], "delta": "0:00:00.004494", "end": "2024-03-10 01:22:01.301518", "msg": "non-zero return code", "rc": 1, "start": "2024-03-10 01:22:01.297024", "stderr": "2024-03-10T01:22:01.301+0200\tquery '[123 34 99 104 97 114 116 95 116 121 112 101 34 58 32 34 115 121 115 116 101 109 34 44 32 34 99 104 97 114 116 95 102 97 109 105 108 121 34 58 32 34 99 112 117 34 44 32 34 99 104 97 114 116 95 99 111 110 116 101 120 116 34 58 32 34 115 121 115 116 101 109 46 99 112 117 34 44 32 34 105 100 34 58 32 34 105 100 108 101 34 44 32 34 116 105 109 101 115 116 97 109 112 34 58 32 123 34 36 103 116 34 58 32 49 55 49 48 48 50 54 49 54 50 44 32 34 36 108 116 34 58 32 32 125 125]' is not valid JSON: invalid character '}' looking for beginning of value\n2024-03-10T01:22:01.301+0200\ttry 'mongoexport --help' for more information", "stderr_lines": ["2024-03-10T01:22:01.301+0200\tquery '[123 34 99 104 97 114 116 95 116 121 112 101 34 58 32 34 115 121 115 116 101 109 34 44 32 34 99 104 97 114 116 95 102 97 109 105 108 121 34 58 32 34 99 112 117 34 44 32 34 99 104 97 114 116 95 99 111 110 116 101 120 116 34 58 32 34 115 121 115 116 101 109 46 99 112 117 34 44 32 34 105 100 34 58 32 34 105 100 108 101 34 44 32 34 116 105 109 101 115 116 97 109 112 34 58 32 123 34 36 103 116 34 58 32 49 55 49 48 48 50 54 49 54 50 44 32 34 36 108 116 34 58 32 32 125 125]' is not valid JSON: invalid character '}' looking for beginning of value", "2024-03-10T01:22:01.301+0200\ttry 'mongoexport --help' for more information"], "stdout": "", "stdout_lines": []}

PLAY RECAP *********************************************************************
192.168.1.113              : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   

